Amazon agreed to buy the grocery chain Whole Foods for $13.4 billion.