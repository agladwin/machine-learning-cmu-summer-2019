WASHINGTON — After voting to repeal and replace Obamacare last week, House Republicans rode up Pennsylvania Avenue to celebrate with President Trump in the Rose Garden. The reveling was premature: The bill still has to go to the Senate and back to the House, and analysts have already highlighted the immense electoral risks that come with rushing through an overwhelmingly unpopular bill. But there’s another, more immediate, level of risk involved in the bill’s passage: what it means for the rest of the party agenda. Far from unifying Republicans behind a strong president, it may end up driving them apart. First of all, the real takeaway from the week was not the political prowess of Paul Ryan or President Trump, but the intensity of Republican infighting, even on an issue where the party was supposedly unified. In shooting down the first version of the American Health Care Act and pushing through a more draconian revision, the hard-right House Freedom Caucus showed that it, not the White House or Speaker Ryan, was the determining factor on this issue within the party. The bill established a template: devise legislation based on Freedom Caucus priorities, then add just enough concessions to bring in the minimal number of centrists needed to pass — and swiftly, before Congress’s nonpartisan scorekeepers can estimate the impact of the bill. The problem is, that’s a terrible way to write legislation. Even after amending the bill to put more money into high-risk insurance pools, the final deal pulled the plan sharply to the right, with provisions that critics say will increase premiums for older and sicker Americans, deprive millions of low-income Americans of coverage and undermine the quality of insurance mandated by Obamacare. Legislating from the right will become harder as the 2018 midterm elections approach. Vulnerable Republicans who voted yes this time, like Darrell Issa of California, could find it harder to do so six months from now. There’s another problem with outside-in deal making: It results in bills that can’t pass the Senate. True, it’s too early to tell how the Republican plan will fare in the Senate. But Senate Republicans have already said that they will likely write their own, more centrist bill, possibly including provisions objectionable to the Freedom Caucus. This is hardly the easy path to legislative success, and yet it seems to be the one that the White House and House Republican leadership prefer. Moreover, the challenge of push-me pull-me legislating among rival factions will continue into summer and fall, just as Republicans attempt to write a new budget and work on the president’s call for major tax cuts. Not only does that mean less time for each item, but tensions over one could easily bleed into the other. At least some Republicans see the risks. Last week the chairman of the House tax panel called for party lawmakers and the White House to get on the same page before trying to legislate. If the strategy works, it might smooth the waters for congressional passage of a deal. It would also help to tame the influence of competing factions that are likely to emerge over whether or how to pay for trillions in promised tax cuts. But that’s a big if. The bill isn’t just a problem for House Republicans, but for the White House as well. Whatever he now says, Mr. Trump has allowed far-right conservatives to undermine his legislative agenda on a signature item from his campaign. The bill he championed in the Rose Garden runs completely counter to his promises that he would negotiate a “beautiful” replacement for Obamacare in which the government would take care of everybody, insurance would be cheaper and better and Medicaid would be protected from cuts. Instead, most expect that the House bill would skewer the president’s electoral base, since it would be especially harmful to older white Americans and rural, white working-class families. Of course, Mr. Trump’s supporters might say a deal on health care was needed to get victories on what he really cares about, trade and infrastructure. But few House Republicans of any stripe are interested in those, and he has now shown that he will let fighting among party factions set the terms of any legislation. An emboldened Congress, dominated by the right, might start aggressively pursuing conservatives’ quest to roll back entitlements like Medicare, something the president campaigned against. Unified party control rarely lasts long in American politics. Mr. Trump and the party have a small window for both fulfilling promises to their base and proving to a broader electorate that they can be trusted to govern. No matter the outcome of Obamacare repeal, last week in the House confirms how tough it is to govern with slim, divided majorities, even when your party controls the government.